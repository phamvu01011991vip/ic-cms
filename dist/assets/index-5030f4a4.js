import{l as i}from"./index-d2a9c51c.js";import{f as Y,a as q}from"./money-55dd57c9.js";import{d as mt,l as o,A as k,a1 as G,C as J,ad as A,aj as vt,ae as It,o as v,c as V,q as r,w as c,s as e,n as a,J as b,I as h,U as p,y as n,D as Nt,b as B,af as ft,E as ht,F as Et,a as Ot,ah as Vt,ai as gt,a5 as Tt}from"./index-ed2f9e48.js";import{_ as xt}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-9446b8e0.js";import{u as Dt}from"./useUserListStore-98162b8d.js";import{a as R,V as Q}from"./VRow-563cefa7.js";import{V as Ct,c as X}from"./VCard-20e56964.js";import{V as At}from"./VSelect-8e53993f.js";import{V as bt}from"./VTextField-17c7b994.js";import{V as L}from"./VDivider-0654ea99.js";import{V as yt}from"./VTable-60d2b25e.js";import{V as Ut}from"./VPagination-7e9495cf.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-ce0c6228.js";import"./VSpacer-903df1cd.js";import"./createSimpleFunctional-b8ae8fab.js";import"./validators-33c369bf.js";import"./index-681711bc.js";import"./VForm-ffbd60c3.js";import"./VInput-adae660e.js";import"./transition-d0ff91da.js";import"./forwardRefs-a29b5f65.js";import"./VNavigationDrawer-84eb6543.js";import"./ssrBoot-c93ffca9.js";import"./VAvatar-64850002.js";import"./VImg-2cf5c854.js";import"./VList-b41f68bc.js";import"./dialog-transition-a193b3ce.js";import"./easing-9f15041e.js";import"./VMenu-70ab3a33.js";import"./VOverlay-bb2110ac.js";import"./lazy-ad19b40d.js";import"./VCheckboxBtn-d9d39b31.js";import"./VSelectionControl-89de378e.js";import"./VChip-4b6b5bf8.js";/* empty css                   */import"./VField-c67db2c3.js";import"./VCounter-1030fb28.js";const W=g=>(Vt("data-v-016fbf19"),g=g(),gt(),g),St={style:{height:"100%"}},Pt={class:"app-user-search-filter d-flex align-center",style:{height:"100%"}},wt={scope:"col"},kt={scope:"col"},Bt={scope:"col"},Rt={scope:"col"},Lt={scope:"col"},$t={scope:"col"},zt={scope:"col"},Kt={scope:"col"},Mt={scope:"col",style:{"text-align":"center"}},Ht={class:"text-capitalize text-base text-small-txt"},jt={class:"text-capitalize text-base text-small-txt"},Ft={class:"text-capitalize text-base text-small-txt"},Yt={class:"text-capitalize text-base text-small-txt"},qt={class:"text-capitalize text-base text-small-txt"},Gt={class:"text-capitalize text-base text-small-txt"},Jt={class:"text-capitalize text-base smail-bank"},Qt=W(()=>a("br",null,null,-1)),Xt=W(()=>a("br",null,null,-1)),Wt={class:"text-capitalize text-high-emphasis"},Zt={class:"text-base text-small-txt"},te={key:0,class:"text-center",style:{width:"80px"}},ee={key:1,class:"text-center",style:{width:"80px"}},ae={class:"d-flex align-center"},se={class:"text-sm font-weight-regular"},le=mt({__name:"index",setup(g){const Z=Dt(),E=o("");o(),o(),o();const $=o(10),u=o(1),I=o(14),m=o(1);o([]);const y=o(""),U=o(""),d=o(!1),N=o(0),tt=o(),et=o();k(u,(l,t)=>{C(l)});const z=o();async function at(){const l=await fetch("https://api.exchangerate-api.com/v4/latest/USD");console.log("ðŸš€ ~ usdToCny ~ reponse:",l);const t=await l.json(),s=t.rates.VND;return et.value=t.rates.USD,z.value=t.rates.VND,tt.value=s}at(),G(()=>{u.value>m.value&&(u.value=m.value)});const K=o(),T=o({state:"ID",abbr:"id"});k(T,(l,t)=>{K.value=l});const st=[{state:"ID",abbr:"id"},{state:"Name",abbr:"name"}];window.addEventListener("keyup",l=>{l.keyCode===13&&M()});async function M(){try{K.value=="name"?(U.value="",y.value=E.value,nt(y.value)):(y.value="",U.value=E.value,it(U.value))}catch{}}const S=o(!1);G(()=>{u.value>m.value&&(u.value=m.value)});const x=o([]),lt=o(!1);k(x,()=>{x.value.length||(lt.value=!1)},{deep:!0});const ot=l=>{Z.addUser(l)};J(()=>l=>[{title:"View",value:"view",prependIcon:"bx-show",to:{name:"apps-user-view-id",params:{id:l}}},{title:"Edit",value:"edit",prependIcon:"bx-pencil"},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]);const D=o([]),H=o(1),f=o(10),_=o(),O=o(),nt=async l=>{clearInterval(P.value);try{d.value=!0;const t=await A.get("admin/listing_transactions",{params:{page:H.value,limit:f.value,typeTransaction:"toup",fullName:l}});d.value=!1,_.value=t.data,O.value=_.value.transactions.length,I.value=t.data.count,m.value=Math.ceil(I.value/f.value),F.value=!1,D.value=_.value.transactions}catch{d.value=!1}},it=async l=>{clearInterval(P.value);try{d.value=!0;const t=await A.get("admin/listing_transactions",{params:{page:H.value,limit:f.value,typeTransaction:"toup",userId:l}});_.value=t.data,d.value=!1,I.value=t.data.count,m.value=Math.ceil(I.value/f.value),O.value=_.value.transactions.length,F.value=!1,D.value=_.value.transactions}catch(t){console.log(t),d.value=!1}},C=async l=>{console.log("ðŸš€ ~ reLoadOrder ~ page:",l);try{d.value=!0;const t=await A.get("admin/listing_transactions",{params:{page:l,limit:f.value,typeTransaction:"toup"}});_.value=t.data,d.value=!1,O.value=_.value.transactions.length,I.value=t.data.count,m.value=Math.ceil(I.value/f.value),D.value=_.value.transactions}catch{d.value=!1}};async function j(l,t){N.value=l,await A.post("admin/confirm_toup",{transactionId:l,status:t}),N.value=0,C(1)}function rt(l=""){const t=new Date(l);t.setUTCHours(t.getUTCHours()+7);const s=t.getUTCHours(),w=t.getUTCMinutes(),ut=t.getUTCSeconds(),dt=t.getUTCDate(),_t=t.getUTCMonth()+1,pt=t.getUTCFullYear();return`${s.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${ut.toString().padStart(2,"0")} ${dt.toString().padStart(2,"0")}-${_t.toString().padStart(2,"0")}-${pt}`}const P=o(),ct=J(()=>{const l=O.value?(u.value-1)*$.value+1:0,t=O.value+(u.value-1)*$.value;return`${l}-${t} of ${I.value}`}),F=o(!0);return vt(()=>{clearInterval(P.value)}),It(()=>{C(1)}),(l,t)=>(v(),V("section",null,[r(Q,null,{default:c(()=>[r(R,{cols:"12"},{default:c(()=>[r(Ct,{title:e(i).INVOICE_DEPOINT_TITLE},{default:c(()=>[r(X,null,{default:c(()=>[r(Q,null,{default:c(()=>[r(R,{cols:"12",sm:"6",lg:"4",md:"4"},{default:c(()=>[a("div",St,[r(At,{modelValue:e(T),"onUpdate:modelValue":t[0]||(t[0]=s=>b(T)?T.value=s:null),label:e(i).INVOICE_DEPOINT_ORDER_BY,items:st,"item-title":"state","item-value":"abbr"},null,8,["modelValue","label"])])]),_:1}),r(R,{cols:"12",sm:"6",lg:"4",md:"4"},{default:c(()=>[a("div",Pt,[r(bt,{modelValue:e(E),"onUpdate:modelValue":t[1]||(t[1]=s=>b(E)?E.value=s:null),placeholder:e(i).INVOICE_DEPOINT_SEARCHKEY_PLACEHOLDER,density:"compact",class:"me-3"},null,8,["modelValue","placeholder"]),r(h,{class:"me-3",onClick:M},{default:c(()=>[p(n(e(i).INVOICE_DEPOINT_SEARCH_BUTTON)+" ",1),r(Nt,{end:"",icon:"bx-search"})]),_:1}),r(h,{density:"compact",icon:"mdi-reload",onClick:t[2]||(t[2]=s=>C(e(u)))})])]),_:1})]),_:1})]),_:1}),r(L),r(L),e(d)?(v(),B(ft,{key:0,height:"10",indeterminate:"",color:"primary"})):ht("",!0),r(yt,{class:"text-no-wrap"},{default:c(()=>[a("thead",null,[a("tr",null,[a("th",wt,n(e(i).INVOICE_DEPOINT_ID_ORDER),1),a("th",kt,n(e(i).ID_USER),1),a("th",Bt,n(e(i).INVOICE_DEPOINT_TOTAL_AMOUNT_VN)+"(VND) ",1),a("th",Rt,n(e(i).INVOICE_DEPOINT_TOTAL_AMOUNT_USD)+"($) ",1),a("th",Lt,n(e(i).EXCHANGE_RATE)+"VNÄ",1),a("th",$t,n(e(i).INVOICE_DEPOINT_BALANCE),1),a("th",zt,n(e(i).INVOICE_DEPOINT_BANK),1),a("th",Kt,n(e(i).INVOICE_DEPOINT_CREATE_AT),1),a("th",Mt,n(e(i).INVOICE_DEPOINT_ACTION),1)])]),a("tbody",null,[(v(!0),V(Et,null,Ot(e(D),s=>(v(),V("tr",{key:s.transactionId},[a("td",null,[a("span",Ht,n(s.transactionId),1)]),a("td",null,[a("span",jt,n(s.user_id),1)]),a("td",null,[a("span",Ft,n(e(Y)(s.amount)),1)]),a("td",null,[a("span",Yt,n(e(q)(s.amount_usd)),1)]),a("td",null,[a("span",qt,n(e(Y)(e(z))),1)]),a("td",null,[a("span",Gt,n(e(q)(s.balance)),1)]),a("td",null,[a("span",Jt,[p(n(e(i).INVOICE_DEPOINT_ADDBANK_USER_BANK_NAME)+": "+n(s.nameUser||e(i).INVOICE_DEPOINT_ADDBANK_STATUS)+" ",1),Qt,p(n(e(i).INVOICE_DEPOINT_ADDBANK_BANK_NUMBER)+": "+n(s.numberCard||e(i).INVOICE_DEPOINT_ADDBANK_STATUS),1),Xt,p(n(e(i).INVOICE_DEPOINT_ADDBANK_BANK_NAME)+": "+n(s.bankName||e(i).INVOICE_DEPOINT_ADDBANK_STATUS),1)])]),a("td",Wt,[a("span",Zt,n(rt(s.createdAt)),1)]),s.status=="pending"?(v(),V("td",te,[r(h,{color:"success",size:"small",disabled:s.transactionId===e(N),loading:s.transactionId===e(N),onClick:w=>j(s.transactionId,"approved")},{default:c(()=>[p(n(e(i).INVOICE_DEPOINT_ACTION_APPROVED),1)]),_:2},1032,["disabled","loading","onClick"]),p("â€‚ "),r(h,{color:"error",size:"small",disabled:s.transactionId===e(N),loading:s.transactionId===e(N),onClick:w=>j(s.transactionId,"rejected")},{default:c(()=>[p(n(e(i).INVOICE_DEPOINT_ACTION_CANCEL),1)]),_:2},1032,["disabled","loading","onClick"])])):(v(),V("td",ee,[s.status=="approved"?(v(),B(h,{key:0,color:"success",variant:"text",size:"small"},{default:c(()=>[p(n(e(i).INVOICE_DEPOINT_ACTION_APPROVED),1)]),_:1})):(v(),B(h,{key:1,color:"error",variant:"text",size:"small"},{default:c(()=>[p(n(e(i).INVOICE_DEPOINT_ACTION_CANCEL),1)]),_:1}))]))]))),128))])]),_:1}),r(L),r(X,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:c(()=>[a("div",ae,[a("h6",se,n(e(ct)),1)]),r(Ut,{modelValue:e(u),"onUpdate:modelValue":t[3]||(t[3]=s=>b(u)?u.value=s:null),"total-visible":1,rounded:"circle",length:e(m),onNext:t[4]||(t[4]=s=>x.value=[]),onPrev:t[5]||(t[5]=s=>x.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),r(xt,{isDrawerOpen:e(S),"onUpdate:isDrawerOpen":t[6]||(t[6]=s=>b(S)?S.value=s:null),onUserData:ot},null,8,["isDrawerOpen"])]))}});const Me=Tt(le,[["__scopeId","data-v-016fbf19"]]);export{Me as default};
