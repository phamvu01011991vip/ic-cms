import{d as xe,l as n,A as N,ad as B,a1 as Q,C as G,aj as ge,ae as Re,o as u,c as F,s as t,b as E,w as c,q as i,n as e,y as l,t as I,J as C,I as V,U as O,D as Ee,af as J,E as X,F as Ve,a as Oe,M as De,O as Se,ah as Ie,ai as Ae,a5 as Te}from"./index-ed2f9e48.js";import{l as r}from"./index-d2a9c51c.js";import{a as z}from"./money-55dd57c9.js";import{u as ye}from"./useUserListStore-98162b8d.js";import{a as D,V as Z}from"./VRow-563cefa7.js";import{V as H,c as S}from"./VCard-20e56964.js";import{V as M}from"./VAvatar-64850002.js";import{V as ee}from"./VSelect-8e53993f.js";import{V as be}from"./VTextField-17c7b994.js";import{V as Y}from"./VDivider-0654ea99.js";import{V as we}from"./VSpacer-903df1cd.js";import{V as Ue}from"./VTable-60d2b25e.js";import{V as Le}from"./VPagination-7e9495cf.js";import"./createSimpleFunctional-b8ae8fab.js";import"./VImg-2cf5c854.js";import"./transition-d0ff91da.js";import"./forwardRefs-a29b5f65.js";import"./VList-b41f68bc.js";import"./ssrBoot-c93ffca9.js";import"./VInput-adae660e.js";import"./dialog-transition-a193b3ce.js";import"./easing-9f15041e.js";import"./VMenu-70ab3a33.js";import"./VOverlay-bb2110ac.js";import"./lazy-ad19b40d.js";import"./VCheckboxBtn-d9d39b31.js";import"./VSelectionControl-89de378e.js";import"./VChip-4b6b5bf8.js";/* empty css                   */import"./VField-c67db2c3.js";import"./VCounter-1030fb28.js";const te=A=>(Ie("data-v-d40441b8"),A=A(),Ae(),A),Be={class:"d-flex align-center gap-2"},Ce={class:"text-h6"},He={class:"text-sm"},We={class:"d-flex align-center gap-2"},Pe={class:"text-h6"},ke={class:"text-sm"},$e={class:"d-flex align-center gap-2"},Ne={class:"text-h6"},Fe={class:"text-sm"},ze={style:{height:"100%"}},Me={class:"app-user-search-filter d-flex align-center",style:{height:"100%"}},Ye={scope:"col"},je=te(()=>e("th",{scope:"col"},"ID USER",-1)),Ke={scope:"col"},qe={scope:"col"},Qe={scope:"col"},Ge={scope:"col"},Je={scope:"col"},Xe={scope:"col"},Ze={scope:"col"},et={scope:"col"},tt={scope:"col",style:{"text-align":"center"}},at={class:"text-capitalize text-base txtmini"},st={style:{"text-align":"center"}},lt={class:"text-capitalize text-base txtmini"},ot={class:"text-capitalize text-base txtmini"},nt={class:"text-capitalize text-base txtmini"},it={class:"text-capitalize text-base txtmini"},ct={class:"text-capitalize text-high-emphasis"},rt={style:{"text-align":"center","align-items":"center"}},dt={class:"text-base txtmini text-high-emphasis"},ut={class:"text-base txtmini text-high-emphasis"},_t={class:"text-capitalize txtmini text-high-emphasis"},pt={class:"text-capitalize text-high-emphasis"},mt={class:"text-base txtmini"},vt={class:"text-center",style:{width:"80px"}},ht=te(()=>e("tr",null,[e("td",{colspan:"7",class:"text-center text-body-1"}," No data available ")],-1)),ft=[ht],xt={class:"d-flex align-center",style:{width:"200px"}},gt={class:"text-no-wrap text-sm me-3"},Rt={class:"d-flex align-center"},Et={class:"text-sm font-weight-regular"},Vt=xe({__name:"overview",setup(A){ye();const m=n("");n(),n(),n(),n();const p=n(10),d=n(1),W=n(),v=n(1);n([]);const T=n(""),y=n(""),b=n(!1),h=n(0),ae=n();N(d,(o,s)=>{f(o)});const f=async(o=1)=>{_.value="";try{b.value=!0;const s=await B.get("admin/listing",{params:{page:o,limit:p.value,nameUser:T.value,userId:y.value}});s.data.success&&(_.value=s.data.data,W.value=s.data.count,v.value=Math.ceil(W.value/p.value),b.value=!1)}catch{b.value=!1}},P=n(),x=n(),g=n(),j=n(!1),w=n();n(),n();const R=n();async function se(){try{const o=await B.get("admin/statisticsOverview");console.log("ðŸš€ ~ fetchStatistics ~ res:",o==null?void 0:o.data),o.data.success==!0&&(o.data.Amount.amountPercentage==null&&(o.data.Amount.amountPercentage=0),o.data.Order.percentage==null&&(o.data.Order.percentage=0),g.value=o.data.Amount,P.value=o.data.User,w.value=P.value.percentage,w.value&&(R.value=w.value.toFixed(2)),w.value||(R.value=0),x.value=o.data.Order,j.value=!0)}catch(o){console.log(o)}}async function le(){const a=(await(await fetch("https://api.exchangerate-api.com/v4/latest/USDT")).json()).rates.CNY;return ae.value=a}le(),Q(()=>{d.value>v.value&&(d.value=v.value)});const k=n(),U=n({state:"ID",abbr:"id"});N(U,(o,s)=>{k.value=o});const oe=[{state:"ID",abbr:"id"},{state:"Name",abbr:"name"}];window.addEventListener("keyup",o=>{o.keyCode===13&&K()});async function K(){try{_.value="",pe.value=!1,k.value=="name"&&(y.value="",T.value=m.value,f()),k.value=="id",T.value="",y.value=m.value,f()}catch{}}n(!1),Q(()=>{d.value>v.value&&(d.value=v.value)});const ne=G(()=>{const o=_.value.length?(d.value-1)*p.value+1:0,s=_.value.length+(d.value-1)*p.value;return`${o}-${s} of ${W.value}`}),L=n([]),ie=n(!1);N(L,()=>{L.value.length||(ie.value=!1)},{deep:!0}),G(()=>(o,s)=>s=="pending"?[{title:"View",value:"view",prependIcon:"bx-show",to:{name:"apps-user-view-id",params:{id:o}}},{title:"Win",value:"approve",prependIcon:"bx-check"},{title:"Lose",value:"cancel",prependIcon:"bx-block"},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]:[{title:"View",value:"view",prependIcon:"bx-show",to:{name:"apps-user-view-id",params:{id:o}}},{title:"EditS",value:"edit",prependIcon:"bx-pencil"},{title:"Delete",value:"delete",prependIcon:"bx-trash-alt"}]);const _=n([]),ce=n(1),re=n(20),de=async()=>{const s=(await B.get("admin/listing",{params:{page:ce.value,limit:re.value}})).data;_.value=s.data};function ue(o=""){const s=new Date(o);s.setUTCHours(s.getUTCHours()+7);const a=s.getUTCHours(),$=s.getUTCMinutes(),me=s.getUTCSeconds(),ve=s.getUTCDate(),he=s.getUTCMonth()+1,fe=s.getUTCFullYear();return`${a.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")} ${ve.toString().padStart(2,"0")}-${he.toString().padStart(2,"0")}-${fe}`}async function q(o,s){h.value=o,await B.post("admin/order_confirm",{orderId:o,orderResult:s}),h.value=0,de()}const _e=n(),pe=n(!0);return ge(()=>{clearInterval(_e.value)}),Re(()=>{f(),se()}),(o,s)=>(u(),F("section",null,[t(j)?(u(),E(Z,{key:0},{default:c(()=>[i(D,{cols:"12",sm:"6",lg:"3"},{default:c(()=>[i(H,null,{default:c(()=>[i(S,{class:"d-flex justify-space-between"},{default:c(()=>[e("div",null,[e("span",null,l(t(r).DASHBOARD_OVERVIEW_TITLE_USER),1),e("div",Be,[e("h6",Ce,l(t(P).total),1),e("span",{class:I([t(R)>0?"text-success":"text-error","text-sm"])}," ("+l(t(R)>0?`+${t(R)}`:t(R))+"%) ",3)]),e("span",He,l(t(r).DASHBOARD_OVERVIEW_SUBTITLE_USER),1)]),i(M,{rounded:"",variant:"tonal",color:"primary",icon:"bx-user"})]),_:1})]),_:1})]),_:1}),i(D,{cols:"12",sm:"6",lg:"3"},{default:c(()=>[i(H,null,{default:c(()=>[i(S,{class:"d-flex justify-space-between"},{default:c(()=>[e("div",null,[e("span",null,l(t(r).DASHBOARD_OVERVIEW_TITLE_MONEY),1),e("div",We,[e("h6",Pe,l(t(g).totalAmount)+"$",1),e("span",{class:I([t(g).amountPercentage>0?"text-success":"text-error","text-sm"])}," ("+l(t(g).amountPercentage>0?`+${t(g).amountPercentage.toFixed(2)}`:t(g).amountPercentage.toFixed(2))+"%) ",3)]),e("span",ke,l(t(r).DASHBOARD_OVERVIEW_SUBTITLE_MONEY),1)]),i(M,{rounded:"",variant:"tonal",color:"primary",icon:"bx-money-withdraw"})]),_:1})]),_:1})]),_:1}),i(D,{cols:"12",sm:"6",lg:"3"},{default:c(()=>[i(H,null,{default:c(()=>[i(S,{class:"d-flex justify-space-between"},{default:c(()=>[e("div",null,[e("span",null,l(t(r).DASHBOARD_OVERVIEW_TITLE_ORDER),1),e("div",$e,[e("h6",Ne,l(t(x).total),1),e("span",{class:I([t(x).percentage>0?"text-success":"text-error","text-sm"])}," ("+l(t(x).percentage>0?`+${t(x).percentage.toFixed(2)}`:t(x).percentage.toFixed(2))+"%) ",3)]),e("span",Fe,l(t(r).DASHBOARD_OVERVIEW_SUBTITLE_ORDER),1)]),i(M,{rounded:"",variant:"tonal",color:"primary",icon:"bx-candles"})]),_:1})]),_:1})]),_:1}),i(D,{cols:"12"},{default:c(()=>[i(H,{title:t(r).DASHBOARD_OVERVIEW_LIST_ORDER_TITLE},{default:c(()=>[i(S,null,{default:c(()=>[i(Z,null,{default:c(()=>[i(D,{cols:"12",sm:"6",lg:"4",md:"4"},{default:c(()=>[e("div",ze,[i(ee,{modelValue:t(U),"onUpdate:modelValue":s[0]||(s[0]=a=>C(U)?U.value=a:null),label:t(r).DASHBOARD_OVERVIEW_LIST_ORDER_BY,items:oe,"item-title":"state","item-value":"abbr"},null,8,["modelValue","label"])])]),_:1}),i(D,{cols:"12",sm:"6",lg:"4",md:"4"},{default:c(()=>[e("div",Me,[i(be,{modelValue:t(m),"onUpdate:modelValue":s[1]||(s[1]=a=>C(m)?m.value=a:null),placeholder:t(r).DASHBOARD_OVERVIEW_LIST_ORDER_SEARCHKEY_PLACEHOLDER,density:"compact",class:"me-3"},null,8,["modelValue","placeholder"]),i(V,{class:"me-3",onClick:K},{default:c(()=>[O(l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_SEARCHKEY_BUTTON)+" ",1),i(Ee,{end:"",icon:"bx-search"})]),_:1}),i(V,{density:"compact",icon:"mdi-reload",onClick:s[2]||(s[2]=a=>f(t(d)))})])]),_:1})]),_:1})]),_:1}),i(Y),i(S,{class:"d-flex flex-wrap gap-4"},{default:c(()=>[i(V,{variant:"tonal",color:"secondary","prepend-icon":"bx-arrow-from-bottom"},{default:c(()=>[O(l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_EXPORT),1)]),_:1}),i(we)]),_:1}),i(Y),t(b)?(u(),E(J,{key:0,height:"10",indeterminate:"",color:"primary"})):X("",!0),i(Ue,{class:"text-no-wrap"},{default:c(()=>[e("thead",null,[e("tr",null,[e("th",Ye,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_ID_ORDER),1),je,e("th",Ke,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_INPUT),1),e("th",qe,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_OUTPUT),1),e("th",Qe,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_SYMBOLS),1),e("th",Ge,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_TYPE),1),e("th",Je,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_DURATION),1),e("th",Xe,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_AMOUNT),1),e("th",Ze,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_PROFIT),1),e("th",et,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_CREATE_AT),1),e("th",tt,l(t(r).DASHBOARD_OVERVIEW_LIST_ACTIONS),1)])]),e("tbody",null,[(u(!0),F(Ve,null,Oe(t(_),a=>(u(),F("tr",{key:a.id},[e("td",null,[e("span",at,l(a.id),1)]),e("td",st,[e("span",lt,l(a.user_id),1)]),e("td",null,[e("span",ot,l(a.entry_price),1)]),e("td",null,[e("span",nt,l(a.exit_price),1)]),e("td",null,[e("span",it,l(a.name),1)]),e("td",ct,[e("span",{class:I([[a.order_type=="long"?"success-green":"error-red"],"text-base txtmini"])},l(a.order_type),3)]),e("td",rt,[e("span",dt,l(a.order_duration),1)]),e("td",null,[e("span",ut,l(t(z)(a.amount)),1)]),e("td",_t,[e("span",{class:I([[a.order_result=="win"?"success-green":"error-red"],"text-base txtmini"])},l(a.order_result=="win"?t(z)(parseFloat(a.profit)):t(z)(-parseFloat(a.amount))),3)]),e("td",pt,[e("span",mt,l(ue(a.createdAt)),1)]),e("td",vt,[a.order_result=="pending"?(u(),E(V,{key:0,color:"success",size:"small",loading:a.id===t(h),disabled:a.id===t(h),onClick:$=>q(a.id,"win")},{default:c(()=>[O(" Win ")]),_:2},1032,["loading","disabled","onClick"])):(u(),E(V,{key:1,color:a.order_result=="win"?"success":"error",size:"small",variant:"text"},{default:c(()=>[O(" KQ: "+l(a.order_result),1)]),_:2},1032,["color"])),O("â€‚ "),a.order_result=="pending"?(u(),E(V,{key:2,color:"error",size:"small",loading:a.id===t(h),disabled:a.id===t(h),onClick:$=>q(a.id,"lose")},{default:c(()=>[O(" Lose ")]),_:2},1032,["loading","disabled","onClick"])):X("",!0)])]))),128))]),De(e("tfoot",null,ft,512),[[Se,!t(_).length]])]),_:1}),i(Y),i(S,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:c(()=>[e("div",xt,[e("span",gt,l(t(r).DASHBOARD_OVERVIEW_LIST_ORDER_ROW_PER_PAGE)+":",1),i(ee,{modelValue:t(p),"onUpdate:modelValue":s[3]||(s[3]=a=>C(p)?p.value=a:null),density:"compact",class:"per-page-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),e("div",Rt,[e("h6",Et,l(t(ne)),1)]),i(Le,{modelValue:t(d),"onUpdate:modelValue":s[4]||(s[4]=a=>C(d)?d.value=a:null),"total-visible":1,rounded:"circle",length:t(v),onNext:s[5]||(s[5]=a=>L.value=[]),onPrev:s[6]||(s[6]=a=>L.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):(u(),E(J,{key:1,height:"10",indeterminate:"",color:"primary"}))]))}});const ea=Te(Vt,[["__scopeId","data-v-d40441b8"]]);export{ea as default};
